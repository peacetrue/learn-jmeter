= jMeter 用户手册翻译

主要翻译笔者使用到的部分章节。

== 3. 测试计划的要素

https://jmeter.apache.org/usermanual/test_plan.html[原文地址^]

本节描述测试计划的不同部分。

最少的测试将包括测试计划，线程组和一个或多个采样器。

=== 3.0 测试计划

测试计划对象具有一个称为“功能测试”的复选框。
如果选择，它将使JMeter记录每个样本从服务器返回的数据。
如果您在测试侦听器中选择了一个文件，则此数据将被写入文件。
如果要进行少量运行以确保正确配置JMeter并确保服务器返回预期结果，则此功能很有用。
结果是文件将快速增长，JMeter的性能将受到影响。
如果要进行压力测试，则应禁用此选项（默认情况下处于禁用状态）。
如果您没有将数据记录到文件中，则此选项没有区别。
您还可以使用侦听器上的“配置”按钮来确定要保存的字段。

=== 3.1 线程组

线程组元素是任何测试计划的起点。所有控制器和采样器必须在线程组下。其他元素，例如侦听器可以直接放在测试计划下，在这种情况下，它们将应用于所有线程组。顾名思义，线程组元素控制JMeter将用于执行测试的线程数。线程组的控件使您可以：

* 设置线程数
* 设置启动周期
* 设置执行测试的次数

每个线程将完整地执行测试计划，并且完全独立于其他测试线程。多个线程用于模拟与服务器应用程序的并发连接。

加速期告诉JMeter将“加速”到所选线程总数需要多长时间。如果使用了10个线程，并且启动周期为100秒，那么JMeter将花费100秒来启动和运行所有10个线程。每个线程将在上一个线程开始后10（100/10）秒开始。如果有30个线程，启动周期为120秒，则每个连续线程将延迟4秒。

升级需要足够长的时间，以避免在测试开始时工作量过大，并且还必须足够短，以使最后一个线程在第一个线程完成之前开始运行（除非有人希望这样做）。

从“ Ramp-up =线程数”开始，然后根据需要向上或向下调整。

默认情况下，线程组被配置为遍历其元素一次。

线程组还提供了一个调度程序。单击“线程组”面板底部的复选框以启用/禁用其他字段，您可以在其中输入测试持续时间，启动延迟，运行的开始和结束时间。您可以配置持续时间（秒）和启动延迟（秒）来控制每个线程组的持续时间以及启动后的秒数。当测试开始时，JMeter将在启动线程组的线程之前等待启动延迟（秒），然后运行配置的持续时间（秒）。请注意，这两个选项将覆盖开始时间和结束时间。

另外，您也可以使用其他两个字段“开始时间”和“结束时间”（尽管不建议这样做，因为它不太灵活）。测试开始后，如有必要，JMeter将等待直到达到启动时间。在每个周期的末尾，JMeter会检查是否已达到结束时间，如果已结束，则运行将停止，否则，将允许测试继续进行直到达到迭代限制。

== 18 Introduction

=== 18.4 Configuration Elements

==== HTTP Cookie Manager

Cookie Manager元素具有两个功能：

首先，它像网络浏览器一样存储和发送cookie。如果您有HTTP请求，并且响应包含cookie，则cookie管理器会自动存储该cookie，并将其用于将来对该特定网站的所有请求。每个JMeter线程都有其自己的“ cookie存储区”。因此，如果您正在测试使用cookie来存储会话信息的网站，则每个JMeter线程将拥有自己的会话。请注意，此类cookie不会出现在Cookie Manager的显示屏上，但可以使用“查看结果树侦听器”看到它们。

JMeter会检查收到的Cookie是否对该URL有效。这意味着不会存储跨域Cookie。如果您有错误的行为或希望使用跨域cookie，请定义JMeter属性“ CookieManager.check.cookies = false”。

收到的Cookies可以存储为JMeter线程变量。要将cookie保存为变量，请定义属性“ CookieManager.save.cookies = true”。另外，在存储cookie名称之前，它们以“ COOKIE_”为前缀（这避免了局部变量的意外损坏）。若要恢复原始行为，请定义属性“ CookieManager.name.prefix =”（一个或多个空格）。如果启用，则名为TEST的cookie的值可以称为$\{COOKIE_TEST}。

其次，您可以将Cookie手动添加到Cookie Manager。但是，如果执行此操作，则cookie将被所有JMeter线程共享。

请注意，此类Cookie的创建时间是将来的很远

默认情况下，具有空值的Cookies被忽略。这可以通过设置JMeter属性来更改：CookieManager.delete_null_cookies = false。请注意，这也适用于手动定义的cookie-更新后，所有此类cookie都会从显示中删除。还要注意，cookie名称必须唯一-如果用相同的名称定义了另一个cookie，它将替换第一个。

.Screenshot of Control-Panel of HTTP Cookie Manager
image::http-cookie-manager.png[]

NOTE:: 如果一个采样器范围内有多个Cookie管理器，则当前无法指定要使用哪个Cookie管理器。另外，存储在一个cookie管理器中的cookie对其他任何管理器均不可用，因此请谨慎使用多个cookie管理器。
